---
name: intranet
description: "Lightweight local HTTP file server with dynamic Python pages and symlink-based plugin support. Use for serving HTML dashboards, documentation, or web content generated by other skills. Start/stop/status management with PID tracking."
summary: "Local HTTP file server with dynamic Python pages and plugin support."
version: 1.3.1
homepage: https://github.com/odrobnik/intranet-skill
metadata:
  openclaw:
    emoji: "üåê"
    requires:
      bins: ["python3"]
---

# Intranet

Lightweight local HTTP file server with dynamic Python pages ‚Äî no Apache/nginx needed, no root required. Designed for exposing workspace files to your local LAN: dashboards, JSON APIs, and web UIs for local automations.

**Entry point:** `{baseDir}/scripts/intranet.py`

## Setup

See [SETUP.md](SETUP.md) for prerequisites and setup instructions.

## Commands

```bash
python3 {baseDir}/scripts/intranet.py start                          # Start on default port 8080
python3 {baseDir}/scripts/intranet.py start --port 9000              # Custom port
python3 {baseDir}/scripts/intranet.py start --dir /path/to/webroot   # Custom root directory
python3 {baseDir}/scripts/intranet.py start --host localhost          # Local-only (no LAN)
python3 {baseDir}/scripts/intranet.py start --token SECRET            # Enable bearer token auth
python3 {baseDir}/scripts/intranet.py status                         # Check if running
python3 {baseDir}/scripts/intranet.py stop                           # Stop server
```

## Features

### Dynamic Python Pages

Executable `.py` files in the webroot run as CGI scripts ‚Äî dashboards, JSON APIs, data views. The file must have the executable bit set (`chmod +x`).

### Plugin Support via Symlinks

Other skills add content by symlinking directories into the webroot:

```bash
ln -s {workspace}/deliveries {workspace}/intranet/deliveries
ln -s {workspace}/banker {workspace}/intranet/banker
```

Served at `http://localhost:8080/deliveries/`, `http://localhost:8080/banker/`, etc.

## Security

- **Host allowlist** ‚Äî optional `allowed_hosts` in config.json restricts which `Host` header values the server responds to. Requests with unknown hosts get `403`. Use to limit access to known names (e.g. `localhost`, `mac-studio.local`, your tunnel domain).
- **Token auth** ‚Äî optional bearer token via `--token` flag, `INTRANET_TOKEN` env var, or `token` in config.json. Browser clients visit `?token=SECRET` once ‚Üí session cookie set ‚Üí all subsequent navigation works without tokens in URLs. API clients use `Authorization: Bearer <token>` header. **Always enable when exposing to the internet.**
- **Path containment** ‚Äî all paths are resolved and checked; requests cannot traverse outside the webroot
- **Symlink targets must be within the workspace or /tmp** ‚Äî symlinks pointing elsewhere are rejected
- **CGI execution requires executable permission** (`chmod +x`) AND the script must resolve to a path within the workspace
- **Default bind: `0.0.0.0`** (all interfaces, accessible from LAN). Use `--host localhost` to restrict to local machine only
- Treat all symlinked content and `.py` files in the webroot as trusted ‚Äî the server will execute them

## Notes
- PID file: `~/.intranet.pid`
- Config file: `~/.intranet.conf`
- Default root: `{workspace}/intranet/` (override with `--dir` or `INTRANET_DIR`)
- 30-second timeout on CGI execution
